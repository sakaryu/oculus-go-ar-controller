<!doctype HTML>
<html>
<!-- A-Frame ライブラリの読み込み -->
<script src="https://aframe.io/releases/0.9.1/aframe.min.js"></script>
<!-- AR.js ライブラリの読み込み -->
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.7.0/aframe/build/aframe-ar.js"></script>
<body style='margin : 0px; overflow: hidden;'>
<a-scene embedded arjs="debugUIEnabled:false;trackingMethod:best;" vr-mode-ui="enabled: false">
    <a-assets>
        <a-asset-item id="oculus_controller-obj" src="model_obj/oculus_controller.obj"></a-asset-item>
    </a-assets>
    <a-marker preset="hiro">
        <a-obj-model id="oculus_controller" src="#oculus_controller-obj" position="0 1 0" scale="1 1 1" rotation="0 180 0"></a-obj-model>
    </a-marker>
    <a-entity camera></a-entity>
    <div class="ui">
        <button id="button_a">button</button>
    </div>
</a-scene>
</body>
<style>
    .ui {
        position: absolute;
        z-index: 100;
        bottom: 0;
        left: 0;
        width: 100%;
        height: auto;
        margin: 0;
        padding: 10px 15px 30px;
        text-align: center;
        box-sizing: border-box;
    }
</style>
<script>
    const buttonA = document.getElementById("button_a");
    const oculusController = document.getElementById("oculus_controller");
    const oculusControllerObj = oculusController.object3D;
    function tick(pos) {
        let cameraObj = oculusControllerObj.parent;
        let x = cameraObj.position.x - pos.x;
        let y = cameraObj.position.y - pos.y;
        oculusControllerObj.position.x = x;
        oculusControllerObj.position.y = y;
        // console.log(oculusControllerObj.position);
        setTimeout(function () {
            // requestAnimationFrame(tick(pos));
            tick(pos);
        }, 0);
    };
    buttonA.onclick = function(){
        let cameraObj = oculusControllerObj.parent;
        tick(cameraObj.position);
    };

</script>
</html>
